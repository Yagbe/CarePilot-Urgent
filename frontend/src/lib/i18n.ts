/** Translation dictionaries for Arabic mode */
export type Language = "en" | "ar";

const translations: Record<Language, Record<string, string>> = {
  en: {
    // Intake
    "intake.title": "Urgent Care Intake",
    "intake.subtitle": "Most check-ins take under 30 seconds.",
    "intake.step": "Step",
    "intake.of": "of",
    "intake.firstName": "First name",
    "intake.lastName": "Last name",
    "intake.phone": "Phone",
    "intake.dob": "Date of birth",
    "intake.dobHint": "YYYY-MM-DD. Future dates not allowed.",
    "intake.symptoms": "Symptoms",
    "intake.symptomsPlaceholder": "Describe symptoms in plain language...",
    "intake.duration": "Symptom duration",
    "intake.durationPlaceholder": "e.g. 2 days",
    "intake.arrival": "When are you likely to arrive?",
    "intake.arrivalNow": "Now",
    "intake.arrivalSoon": "In 1-2 hours",
    "intake.arrivalLater": "Later today",
    "intake.insurance": "Insurance (optional)",
    "intake.insuranceDesc": "You can skip this step and pay cash at the clinic, or enter insurance details for eligibility checks.",
    "intake.usingInsurance": "Using insurance",
    "intake.selfPay": "Self-pay",
    "intake.nationalId": "National ID / Iqama / Passport",
    "intake.insurerName": "Insurer name",
    "intake.insurerPlaceholder": "e.g. Bupa, Tawuniya",
    "intake.policyNumber": "Policy number",
    "intake.memberId": "Member ID",
    "intake.consent": "I consent to sharing my information for insurance eligibility and claims processing. This does not authorize diagnosis or treatment.",
    "intake.confirm": "Confirm and submit to generate your token and QR code.",
    "intake.confirm1": "Privacy-safe public display uses token only.",
    "intake.confirm2": "AI intake summary is operational, non-diagnostic.",
    "intake.confirm3": "If you chose insurance, staff will review coverage and claims before any submission.",
    "intake.back": "Back",
    "intake.next": "Next",
    "intake.submit": "Submit Intake",
    "intake.submitting": "Submitting…",
    "intake.optional": "Optional",
    "intake.optionalIdentifier": "Optional identifier",
    // Kiosk
    "kiosk.scanning": "Scanning for QR…",
    "kiosk.qrDetected": "QR detected, checking in…",
    "kiosk.checkingIn": "Checking in…",
    "kiosk.checkedIn": "Checked in",
    "kiosk.scanPaused": "Checked in. Scan paused for 3 seconds…",
    "kiosk.codeNotFound": "Code not found.",
    "kiosk.checkInError": "Check-in error. Use manual fallback.",
    "kiosk.cameraUnavailable": "Camera unavailable. Use manual fallback.",
    "kiosk.enterCode": "Enter code manually",
    "kiosk.checkIn": "Check In",
    "kiosk.token": "Token",
    "kiosk.waitTime": "Estimated wait",
    "kiosk.minutes": "minutes",
    "kiosk.vitals": "Vitals",
    "kiosk.chat": "Chat",
    "kiosk.sessionDone": "Session done",
    "kiosk.typeMessage": "Type your message…",
    "kiosk.send": "Send",
    "kiosk.sending": "Sending…",
    "kiosk.checkedInTitle": "✓ You're checked in",
    "kiosk.welcome": "Welcome,",
    "kiosk.estimatedWait": "Estimated wait:",
    "kiosk.nextVitals": "Next: collect your vitals below.",
    "kiosk.priority": "Priority:",
    "kiosk.priorityHigh": "High",
    "kiosk.priorityMedium": "Medium",
    "kiosk.priorityLow": "Low",
    "kiosk.vitalsTitle": "Vitals",
    "kiosk.vitalsDesc": "Use the provided sensors to record your blood pressure, pulse, and body temperature, then enter the readings here (or have staff enter them).",
    "kiosk.bloodPressure": "Blood pressure",
    "kiosk.pulse": "Pulse",
    "kiosk.bodyTemp": "Body temp",
    "kiosk.continueChat": "Continue to chat",
    "kiosk.chatTitle": "Chat with",
    "kiosk.chatSubtitle": "ask wait time, wayfinding, or workflow",
    "kiosk.chatHint": "Type or use the mic. Non-diagnostic only. Emergency symptoms? Alert staff immediately.",
    "kiosk.chatPlaceholder": "Ask anything—e.g. \"Where is the waiting room?\" or \"How long is the wait?\"",
    "kiosk.you": "You",
    "kiosk.typeQuestion": "Type your question…",
    "kiosk.voice": "Voice",
    "kiosk.idle": "Idle",
    "kiosk.listening": "Listening…",
    "kiosk.processing": "Processing…",
    "kiosk.speaking": "Speaking",
    "kiosk.redFlag": "Red-flag phrase detected. Please call staff now.",
    "kiosk.scanQR": "Scan your QR code or enter your token above.",
    "kiosk.tokenOrCode": "Token or code",
    "kiosk.tokenOrCodePlaceholder": "UC-1234 or code",
    "kiosk.aiNoResponse": "No response.",
    "kiosk.aiUnavailableShort": "Assistant unavailable right now.",
    "kiosk.aiUnavailable": "Sorry, the AI assistant is unavailable. Please try again or ask staff.",
    "kiosk.vitalsIntro": "Hello, and welcome. Please use the provided sensors to record your blood pressure, pulse, and body temperature. Enter the readings in the slots below.",
    "kiosk.triageHigh": "Based on the vitals you entered, your condition level is high. {script}",
    "kiosk.triageMedium": "Based on the vitals you entered, your condition level is medium. Your vitals need a bit of attention. A nurse may check in with you. Please have a seat in the waiting room and we'll call you when it's your turn.",
    "kiosk.triageLow": "Based on the vitals you entered, your condition level is low. Your vitals look good. Please have a seat in the waiting room. We'll call you when it's your turn.",
    "kiosk.waitShort": "a short time",
    "kiosk.waitAnnouncement": "Your estimated wait is {wait}. When you're ready, tap Continue to chat if you have any questions.",
    // Common
    "common.urgentCareOnly": "Urgent care only. For life-threatening emergencies, call 911 or go to the nearest ER.",
  },
  ar: {
    // Intake
    "intake.title": "استقبال الرعاية العاجلة",
    "intake.subtitle": "معظم عمليات التسجيل تستغرق أقل من 30 ثانية.",
    "intake.step": "الخطوة",
    "intake.of": "من",
    "intake.firstName": "الاسم الأول",
    "intake.lastName": "اسم العائلة",
    "intake.phone": "الهاتف",
    "intake.dob": "تاريخ الميلاد",
    "intake.dobHint": "YYYY-MM-DD. التواريخ المستقبلية غير مسموحة.",
    "intake.symptoms": "الأعراض",
    "intake.symptomsPlaceholder": "اوصف الأعراض بلغة بسيطة...",
    "intake.duration": "مدة الأعراض",
    "intake.durationPlaceholder": "مثال: يومان",
    "intake.arrival": "متى من المحتمل أن تصل؟",
    "intake.arrivalNow": "الآن",
    "intake.arrivalSoon": "خلال ساعة إلى ساعتين",
    "intake.arrivalLater": "لاحقاً اليوم",
    "intake.insurance": "التأمين (اختياري)",
    "intake.insuranceDesc": "يمكنك تخطي هذه الخطوة والدفع نقداً في العيادة، أو إدخال تفاصيل التأمين للتحقق من الأهلية.",
    "intake.usingInsurance": "استخدام التأمين",
    "intake.selfPay": "الدفع النقدي",
    "intake.nationalId": "الهوية الوطنية / الإقامة / جواز السفر",
    "intake.insurerName": "اسم شركة التأمين",
    "intake.insurerPlaceholder": "مثال: بوبا، التعاونية",
    "intake.policyNumber": "رقم البوليصة",
    "intake.memberId": "رقم العضوية",
    "intake.consent": "أوافق على مشاركة معلوماتي للتحقق من أهليتها للتأمين ومعالجة المطالبات. هذا لا يخول التشخيص أو العلاج.",
    "intake.confirm": "تأكيد وإرسال لإنشاء رمزك ورمز QR.",
    "intake.confirm1": "عرض عام آمن للخصوصية يستخدم الرمز فقط.",
    "intake.confirm2": "ملخص الاستقبال بالذكاء الاصطناعي تشغيلي وغير تشخيصي.",
    "intake.confirm3": "إذا اخترت التأمين، سيراجع الموظفون التغطية والمطالبات قبل أي إرسال.",
    "intake.back": "رجوع",
    "intake.next": "التالي",
    "intake.submit": "إرسال الاستقبال",
    "intake.submitting": "جارٍ الإرسال…",
    "intake.optional": "اختياري",
    "intake.optionalIdentifier": "معرف اختياري",
    // Kiosk
    "kiosk.scanning": "جارٍ المسح بحثاً عن QR…",
    "kiosk.qrDetected": "تم اكتشاف QR، جارٍ التسجيل…",
    "kiosk.checkingIn": "جارٍ التسجيل…",
    "kiosk.checkedIn": "تم التسجيل",
    "kiosk.scanPaused": "تم التسجيل. تم إيقاف المسح لمدة 3 ثوانٍ…",
    "kiosk.codeNotFound": "الرمز غير موجود.",
    "kiosk.checkInError": "خطأ في التسجيل. استخدم الإدخال اليدوي.",
    "kiosk.cameraUnavailable": "الكاميرا غير متاحة. استخدم الإدخال اليدوي.",
    "kiosk.enterCode": "أدخل الرمز يدوياً",
    "kiosk.checkIn": "تسجيل الدخول",
    "kiosk.token": "الرمز",
    "kiosk.waitTime": "الوقت المتوقع للانتظار",
    "kiosk.minutes": "دقائق",
    "kiosk.vitals": "العلامات الحيوية",
    "kiosk.chat": "محادثة",
    "kiosk.sessionDone": "انتهت الجلسة",
    "kiosk.typeMessage": "اكتب رسالتك…",
    "kiosk.send": "إرسال",
    "kiosk.sending": "جارٍ الإرسال…",
    "kiosk.checkedInTitle": "✓ تم تسجيل دخولك",
    "kiosk.welcome": "مرحباً،",
    "kiosk.estimatedWait": "الوقت المتوقع للانتظار:",
    "kiosk.nextVitals": "التالي: قم بقياس العلامات الحيوية أدناه.",
    "kiosk.priority": "الأولوية:",
    "kiosk.priorityHigh": "عالية",
    "kiosk.priorityMedium": "متوسطة",
    "kiosk.priorityLow": "منخفضة",
    "kiosk.vitalsTitle": "العلامات الحيوية",
    "kiosk.vitalsDesc": "استخدم المستشعرات المتوفرة لتسجيل ضغط الدم والنبض ودرجة حرارة الجسم، ثم أدخل القراءات هنا (أو اطلب من الموظفين إدخالها).",
    "kiosk.bloodPressure": "ضغط الدم",
    "kiosk.pulse": "النبض",
    "kiosk.bodyTemp": "درجة حرارة الجسم",
    "kiosk.continueChat": "المتابعة إلى المحادثة",
    "kiosk.chatTitle": "محادثة مع",
    "kiosk.chatSubtitle": "اسأل عن وقت الانتظار أو الاتجاهات أو سير العمل",
    "kiosk.chatHint": "اكتب أو استخدم الميكروفون. غير تشخيصي فقط. أعراض طارئة؟ أبلغ الموظفين فوراً.",
    "kiosk.chatPlaceholder": "اسأل أي شيء—مثلاً \"أين غرفة الانتظار؟\" أو \"كم وقت الانتظار؟\"",
    "kiosk.you": "أنت",
    "kiosk.typeQuestion": "اكتب سؤالك…",
    "kiosk.voice": "صوت",
    "kiosk.idle": "خامل",
    "kiosk.listening": "جارٍ الاستماع…",
    "kiosk.processing": "جارٍ المعالجة…",
    "kiosk.speaking": "يتحدث",
    "kiosk.redFlag": "تم اكتشاف عبارة خطر. يرجى الاتصال بالموظفين الآن.",
    "kiosk.scanQR": "امسح رمز QR الخاص بك أو أدخل رمزك أعلاه.",
    "kiosk.tokenOrCode": "الرمز أو الكود",
    "kiosk.tokenOrCodePlaceholder": "UC-1234 أو الكود",
    "kiosk.aiNoResponse": "لا يوجد رد.",
    "kiosk.aiUnavailableShort": "المساعد غير متاح حالياً.",
    "kiosk.aiUnavailable": "عذراً، المساعد بالذكاء الاصطناعي غير متاح الآن. يرجى المحاولة لاحقاً أو سؤال الموظفين.",
    "kiosk.vitalsIntro": "مرحباً بك. يرجى استخدام الأجهزة المتوفرة لقياس ضغط الدم والنبض ودرجة حرارة الجسم، ثم إدخال القراءات في الخانات أدناه.",
    "kiosk.triageHigh": "بناءً على العلامات الحيوية التي أدخلتها، مستوى حالتك عالي. {script}",
    "kiosk.triageMedium": "بناءً على العلامات الحيوية التي أدخلتها، مستوى حالتك متوسط. تحتاج العلامات الحيوية إلى بعض المتابعة. قد يقوم أحد الممرضين بمتابعتك. يرجى الجلوس في غرفة الانتظار وسنقوم بمناداتك عندما يحين دورك.",
    "kiosk.triageLow": "بناءً على العلامات الحيوية التي أدخلتها، مستوى حالتك منخفض. تبدو العلامات الحيوية لديك جيدة. يرجى الجلوس في غرفة الانتظار وسنقوم بمناداتك عندما يحين دورك.",
    "kiosk.waitShort": "وقت قصير",
    "kiosk.waitAnnouncement": "وقت الانتظار التقديري هو {wait}. عندما تكون مستعداً، اضغط متابعة إلى المحادثة إذا كان لديك أي أسئلة.",
    // Common
    "common.urgentCareOnly": "رعاية عاجلة فقط. لحالات الطوارئ المهددة للحياة، اتصل بـ 911 أو اذهب إلى أقرب غرفة طوارئ.",
  },
};

export function t(key: string, lang: Language = "en"): string {
  return translations[lang][key] || translations.en[key] || key;
}

export function getLanguage(): Language {
  if (typeof window === "undefined") return "en";
  const stored = localStorage.getItem("carepilot_lang");
  return stored === "ar" ? "ar" : "en";
}

export function setLanguage(lang: Language): void {
  if (typeof window === "undefined") return;
  localStorage.setItem("carepilot_lang", lang);
  document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
  document.documentElement.lang = lang;
}
